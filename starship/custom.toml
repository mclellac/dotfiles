"$schema" = "https://starship.rs/config-schema.json"

right_format = ""
continuation_prompt = "[âˆ™](bright-black) "
scan_timeout = 30
command_timeout = 500
follow_symlinks = true

# Set the custom color palette for the prompt
palette = "rose-pine-dawn"

# Define the "rose-pine-dawn" color palette
[palettes.rose-pine-dawn]
overlay = '#faf4ed'
love = '#b4637a'
gold = '#ea9d34'
rose = '#d7827e'
pine = '#286983'
foam = '#56949f'
iris = '#907aa9'

# Prompt configuration
format = """
    $username \
    $directory \
    $git_branch \
    $git_status \
    $fill \
    $c \
    $golang \
    $lua \
    $java \
    $julia \
    $nodejs \
    $nim \
    $rust \
    $scala \
    $python \
    $docker_context \
    $kubernetes \
    $aws \
    $env_var \
    $gcloud \
    $azure \
    $helm \
    [$character](fg:iris)
"""

[[kubernetes.contexts]]
# "bold red" style + default symbol when Kubernetes current context name equals "production" *and* the current user
# equals "admin_user"
context_pattern = "production"
user_pattern = "admin_user"
style = "bold red"
context_alias = "prod"
user_alias = "admin"

[[kubernetes.contexts]]
# "green" style + a different symbol when Kubernetes current context name contains openshift
context_pattern = ".*openshift.*"
style = "green"
symbol = "ğŸ’” "
context_alias = "openshift"

[[kubernetes.contexts]]
# Using capture groups
# Contexts from GKE, AWS and other cloud providers usually carry additional information, like the region/zone.
# The following entry matches on the GKE format (`gke_projectname_zone_cluster-name`)
# and renames every matching kube context into a more readable format (`gke-cluster-name`):
context_pattern = "gke_.*_(?P<cluster>[\\w-]+)"
context_alias = "gke-$cluster"

[character]
format = "$symbol "
success_symbol = "[â¯](bold green)"
error_symbol = "[â¯](bold red)"
vimcmd_symbol = "[â®](bold green)"
vimcmd_visual_symbol = "[â®](bold yellow)"
vimcmd_replace_symbol = "[â®](bold purple)"
vimcmd_replace_one_symbol = "[â®](bold purple)"
disabled = false

[cmd_duration]
disabled = true
#[os]
#format = "[ $name ]($style)"
#style = "fg:iris"
#disabled = false

[package]
format = "is [$symbol$version]($style) "
symbol = "ó°— "
style = "fg:gold bold"
display_private = false
disabled = false
version_format = "v${raw}"

# Directory Configuration
[directory]
format = "[ $path ]($style)"
style = "fg:pine"
truncation_length = 12
truncation_symbol = "â€¦/"
read_only = " ó°Œ¾"

[directory.substitutions]
Documents = "ó°ˆ™ "
Downloads = "ï€™ "
Music = "ó°š "
Pictures = "ï€¾ "
"~/Projects/src/github.com" = "îª„ "
"~/Projects/src/gitlab.nm.cbc.ca" = "ïŠ–"
"~/Projects/src/bitbucket.org" = "îœƒ"

# Fill Section
[fill]
style = "fg:overlay"
symbol = " "

# Git
[git_branch]
format = "on [$symbol$branch(:$remote_branch)]($style) "
symbol = "îœ¥ "
style = "fg:foam"
truncation_length = 9223372036854775807
truncation_symbol = "â€¦"
only_attached = false
always_show_remote = false
ignore_branches = []
disabled = false

# Git Status
[git_status]
style = "fg:love"
format = "[$all_status$ahead_behind]($style)"
disabled = true

# Username
[username]
disabled = false
format = "[ ó°§± $user ]($style)"
show_always = false
style_root = "fg:iris"
style_user = "fg:iris"

# Docker Context
[docker_context]
format = "[$symbol $context]($style)"
symbol = "ïŒˆ "
style = "fg:foam"

[kubernetes]
symbol = "â˜¸ "
format = '[$symbol$context( \($namespace\))]($style) in '
style = "fg:love"
disabled = false

[kubernetes.context_aliases]
"gke_.*_(?P<cluster>[\\w-]+)" = "gke-$cluster"
"arn:aws:eks:.*:cluster/ocpconsole" = "AWS EKS Prod"
"arn:aws:eks:.*:cluster/ose-dev" = "AWS EKS Dev"

# Context-specific styling rules are defined below as an array of tables.
# Starship checks them in order and applies the first one that matches.

# Rule for OpenShift Production clusters
# This pattern now correctly looks for the production cluster name within the full context string.
[[kubernetes.contexts]]
context_pattern = ".*/api-ocp-nm-.*"
context_alias = "OpenShift Prod"
style = "fg:love"
symbol = "ó°£ "

# Rule for OpenShift Internal/Development clusters
# This pattern now correctly looks for the internal cluster name within the full context string.
[[kubernetes.contexts]]
context_pattern = ".*/api-ocp-int-nm-.*"
context_alias = "OpenShift Internal"
style = "fg:foam"
symbol = "ó°£ "

# A general rule for any remaining OpenShift clusters
[[kubernetes.contexts]]
context_pattern = ".*openshift.*"
style = "fg:love" # Default OpenShift color from your theme
symbol = "ó°£ "

# A general rule for any GKE cluster
[[kubernetes.contexts]]
context_pattern = "gke_.*"
style = "fg:pine" # Google Cloud color
symbol = "ó±‡¶ "    # Google Cloud Icon

# Rule for a specific GKE primary cluster
[[kubernetes.contexts]]
context_pattern = "gke_.*_us-central1-b_primary"
style = "fg:iris bold" # Special style for the primary GKE cluster

# Rule for local development cluster
[[kubernetes.contexts]]
context_pattern = "dev.local.cluster.k8s"
style = "fg:gold"
symbol = "ï„‰ " # Desktop/local icon

[aws]
format = 'on [$symbol($profile )(\($region\) )(\[$duration\] )]($style)'
symbol = "îŒ½  "
style = "fg:gold"
disabled = false
expiration_symbol = "X"
force_display = false

[aws.region_aliases]

[aws.profile_aliases]

# Display the environment variable used to vary the active gcloud configuration.
#[env_var]
#variable = "CLOUDSDK_ACTIVE_CONFIG_NAME"
#format = "$symbol  [$env_value]($style)"
#symbol = "ó±‡¶ Google Cloud"

[gcloud]
format = 'on [$symbol$account(@$domain)(\($region\))]($style) '
symbol = "ó±‡¶ Google Cloud"
style = "fg:rose"
disabled = false
detect_env_vars = ["CLOUDSDK_ACTIVE_CONFIG_NAME"]

[gcloud.region_aliases]

[gcloud.project_aliases]

# Azure
[azure]
format = "on [$symbol($subscription)]($style) "
symbol = "î®© "
style = "fg:foam"
disabled = false

# Custom Azure display
#[custom.azure]
#command = "az account show -o json | jq -r .name"
#when = "true"
#format = "on $symbol [$output]($style)"
#symbol = "î¯˜"

# Helm
[helm]
format = "[$symbol $release]($style)"
symbol = "âˆ "
style = "fg:love"
disabled = false

# Language Modules

[c]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "î˜ "

[lua]
format = "via [$symbol($version )]($style)"
version_format = "v${raw}"
symbol = "î˜  "
style = "bold blue"
lua_binary = "lua"
disabled = false
detect_extensions = ["lua"]
detect_files = [".lua-version"]
detect_folders = ["lua"]

[golang]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "î˜§ "

[java]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "î‰– "

[julia]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "î˜¤ "

[nodejs]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "îœ˜ "

[nim]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "ó°†¥ "

[rust]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "ó±˜— "

[scala]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "îœ· "

[python]
style = "fg:pine"
format = "[$symbol$version]($style) "
symbol = "îˆµ "

# Additional Modules

[buf]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "ï’ "

[conda]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "ï„Œ "

[crystal]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "î˜¯ "

[dart]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "î˜ "

[fennel]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "îš¯ "

[gradle]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "î™  "

[rlang]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "ó°Ÿ” "

[ruby]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "î‘ "

[swift]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "î• "

[zig]
style = "fg:pine"
format = "[$symbol$version]($style)"
symbol = "îš© "

# Operating Systems
[os.symbols]
Alpaquita = "îª¢ "
Alpine = "ïŒ€ "
AlmaLinux = "ïŒ "
Amazon = "ï‰° "
Android = "ï…» "
Arch = "ïŒƒ "
Artix = "ïŒŸ "
CentOS = "ïŒ„ "
Debian = "ïŒ† "
DragonFly = "îŠ "
Emscripten = "ïˆ… "
EndeavourOS = "ï†— "
Fedora = "ïŒŠ "
FreeBSD = "ïŒŒ "
Garuda = "ó°›“ "
Gentoo = "ïŒ "
HardenedBSD = "ó°Œ "
Illumos = "ó°ˆ¸ "
Kali = "ïŒ§ "
Linux = "ïŒš "
Mabox = "î¬© "
Macos = "ïŒ‚ "
Manjaro = "ïŒ’ "
Mariner = "ï‡ "
MidnightBSD = "ï†† "
Mint = "ïŒ "
NetBSD = "ï€¤ "
NixOS = "ïŒ“ "
OpenBSD = "ó°ˆº "
openSUSE = "ïŒ” "
OracleLinux = "ó°Œ· "
Pop = "ïŒª "
Raspbian = "ïŒ• "
Redhat = "ïŒ– "
RedHatEnterprise = "ïŒ– "
RockyLinux = "ïŒ« "
Redox = "ó°€˜ "
Solus = "ó° ³ "
SUSE = "ïŒ” "
Ubuntu = "ïŒ› "
Unknown = "ïˆ­ "
Void = "ïŒ® "
Windows = "ó°² "
